var postBackstretch;!function(k,_,T){"use strict";function w(t){return u.hasOwnProperty(t)?t:"cover"}function p(t){return h.test(t.url)||t.isVideo}var d,h=/^.*(youtu\.be\/|youtube\.com\/v\/|youtube\.com\/embed\/|youtube\.com\/watch\?v=|youtube\.com\/watch\?.*\&v=)([^#\&\?]*).*/i,a=(k.fn.backstretch=function(r,a){var n,s=arguments;return 0===k(_).scrollTop()&&_.scrollTo(0,0),this.each(function(t){var e,i=k(this),o=i.data("backstretch");if(o){if("string"==typeof s[0]&&"function"==typeof o[s[0]])return void((e=(e=o[s[0]].apply(o,Array.prototype.slice.call(s,1)))===o?T:e)!==T&&((n=n||[])[t]=e));a=k.extend(o.options,a),"object"==typeof o&&"destroy"in o&&o.destroy(!0)}r&&0!==r.length||((t=i.css("background-image"))&&"none"!==t?r=[{url:i.css("backgroundImage").replace(/url\(|\)|"|'/g,"")}]:k.error("No images were supplied for Backstretch, or element must have a CSS-defined background image.")),o=new g(this,r,a||{}),i.data("backstretch",o)}),n?1===n.length?n[0]:n:this},k.backstretch=function(t,e){return k("body").backstretch(t,e).data("backstretch")},k.expr[":"].backstretch=function(t){return k(t).data("backstretch")!==T},k.fn.backstretch.defaults={duration:5e3,transition:"fade",transitionDuration:0,animateFirst:!0,alignX:.5,alignY:.5,paused:!1,start:0,preload:2,preloadSize:1,resolutionRefreshRate:2500,resolutionChangeRatioThreshold:.1},{wrap:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},itemWrapper:{position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"100%",height:"100%",zIndex:-999999},item:{position:"absolute",margin:0,padding:0,border:"none",width:"100%",height:"100%",maxWidth:"none"}}),$=function(t,e){for(var i,o=t.width(),r=t.height(),a=[],n=function(t,e){return"width"===e?o:"height"===e?r:t},s=0;s<e.length;s++)k.isArray(e[s])?(e[s]=function(t){for(var e=1;e<t.length;e++){for(var i=t[e],o=e;t[o-1]&&parseInt(t[o-1].width,10)>parseInt(i.width,10);)t[o]=t[o-1],--o;t[o]=i}return t}(e[s]),i=function(t,e,i){for(var o,r,a=_.devicePixelRatio||1,n=b(),s=(W(),t<e?"portrait":e<t?"landscape":"square"),c=0,h=0;h<i.length&&((r="string"==typeof(r=i[h])?i[h]={url:r}:r).pixelRatio&&"auto"!==r.pixelRatio&&parseFloat(r.pixelRatio)!==a||r.deviceOrientation&&r.deviceOrientation!==n||r.windowOrientation&&r.windowOrientation!==n||r.orientation&&r.orientation!==s||(c=h,o=t,"auto"===r.pixelRatio&&(t*=a),!(r.width>=o)));h++);return i[Math.min(h,c)]}(o,r,e[s]),a.push(i)):("string"==typeof e[s]&&(e[s]={url:e[s]}),(i=k.extend({},e[s])).url=f(i.url,n),a.push(i));return a},x=(d=[],function h(t,e,i,o,r){if(void 0!==t){k.isArray(t)||(t=[t]),arguments.length<5&&"function"==typeof arguments[arguments.length-1]&&(r=arguments[arguments.length-1]),e="function"!=typeof e&&e?e:0,i="function"==typeof i||!i||i<0?t.length:Math.min(i,t.length),o="function"!=typeof o&&o?o:1,e>=t.length&&(i=e=0),o<0&&(o=i),o=Math.min(o,i);var a=t.slice(e+o,i-o);if(t=t.slice(e,o),i=t.length)for(var n,l=0,s=function(){++l===i&&(y(t,r,!a),h(a,0,0,o,r))},c=0;c<t.length;c++)p(t[c])||((n=new Image).src=t[c].url,(n=function(t){for(var e=0;e<d.length;e++)if(d[e].src===t.src)return d[e];return d.push(t),t}(n)).complete?s():k(n).on("load error",s));else y(t,r,!0)}}),n=function(t){for(var e=[],i=0;i<t.length;i++)"string"==typeof t[i]?e.push({url:t[i]}):k.isArray(t[i])?e.push(n(t[i])):e.push(s(t[i]));return e},s=function(t,e){return(t.centeredX||t.centeredY)&&(_.console&&_.console.log&&_.console.log("jquery.backstretch: `centeredX`/`centeredY` is deprecated, please use `alignX`/`alignY`"),t.centeredX&&(t.alignX=.5),t.centeredY&&(t.alignY=.5)),t.speed!==T&&(_.console&&_.console.log&&_.console.log("jquery.backstretch: `speed` is deprecated, please use `transitionDuration`"),t.transitionDuration=t.speed,t.transition="fade"),t.resolutionChangeRatioTreshold!==T&&(_.console.log("jquery.backstretch: `treshold` is a typo!"),t.resolutionChangeRatioThreshold=t.resolutionChangeRatioTreshold),t.fadeFirst!==T&&(t.animateFirst=t.fadeFirst),t.fade!==T&&(t.transitionDuration=t.fade,t.transition="fade"),t.scale&&(t.scale=w(t.scale)),l(t)},l=function(t,e){return"left"===t.alignX?t.alignX=0:"center"===t.alignX?t.alignX=.5:"right"===t.alignX?t.alignX=1:t.alignX===T&&!e||(t.alignX=parseFloat(t.alignX),isNaN(t.alignX)&&(t.alignX=.5)),"top"===t.alignY?t.alignY=0:"center"===t.alignY?t.alignY=.5:"bottom"===t.alignY?t.alignY=1:t.alignX===T&&!e||(t.alignY=parseFloat(t.alignY),isNaN(t.alignY)&&(t.alignY=.5)),t},u={cover:"cover",fit:"fit","fit-smaller":"fit-smaller",fill:"fill"},g=function(t,e,i){this.options=k.extend({},k.fn.backstretch.defaults,i||{}),this.firstShow=!0,s(this.options,!0),this.images=n(k.isArray(e)?e:[e]),this.options.paused&&(this.paused=!0),this.options.start>=this.images.length&&(this.options.start=this.images.length-1),this.options.start<0&&(this.options.start=0),this.isBody=t===document.body;var i=k(_),e=(this.$container=k(t),this.$root=this.isBody?I?i:k(document):this.$container,this.originalImages=this.images,this.images=$(this.options.alwaysTestWindowResolution?i:this.$root,this.originalImages),x(this.images,this.options.start||0,this.options.preload||1),this.$container.children(".backstretch").first());this.$wrap=e.length?e:k('<div class="backstretch"></div>').css(this.options.bypassCss?{}:a.wrap).appendTo(this.$container),this.options.bypassCss||(this.isBody||(t=this.$container.css("position"),e=this.$container.css("zIndex"),this.$container.css({position:"static"===t?"relative":t,zIndex:"auto"===e?0:e}),this.$wrap.css({zIndex:-999998})),this.$wrap.css({position:this.isBody&&I?"fixed":"absolute"})),this.index=this.options.start,this.show(this.index),i.on("resize.backstretch",k.proxy(this.resize,this)).on("orientationchange.backstretch",k.proxy(function(){this.isBody&&0===_.pageYOffset&&(_.scrollTo(0,1),this.resize())},this))};function y(t,e,i){"function"==typeof e&&e.call(t,i)}function f(t,e){if("string"==typeof t)t=t.replace(/{{(width|height)}}/g,e);else if(t instanceof Array)for(var i=0;i<t.length;i++)t[i].src?t[i].src=f(t[i].src,e):t[i]=f(t[i],e);return t}g.prototype={resize:function(){try{var t,e=this.options.alwaysTestWindowResolution?k(_):this.$root,i=e.width(),l=e.height(),d=i/(this._lastResizeContainerWidth||0),p=l/(this._lastResizeContainerHeight||0),u=this.options.resolutionChangeRatioThreshold||0;i===this._lastResizeContainerWidth&&l===this._lastResizeContainerHeight||!(Math.abs(d-1)>=u||isNaN(d)||Math.abs(p-1)>=u||isNaN(p))||(this._lastResizeContainerWidth=i,this._lastResizeContainerHeight=l,this.images=$(e,this.originalImages),this.options.preload&&x(this.images,(this.index+1)%this.images.length,this.options.preload),1!==this.images.length||this._currentImage.url===this.images[0].url)||(t=this,clearTimeout(t._selectAnotherResolutionTimeout),t._selectAnotherResolutionTimeout=setTimeout(function(){t.show(0)},this.options.resolutionRefreshRate));var g,o,r,a={left:0,top:0,right:"auto",bottom:"auto"},n=this.isBody?this.$root.width():this.$root.innerWidth(),s=this.isBody?_.innerHeight||this.$root.height():this.$root.innerHeight(),y=this.$itemWrapper.data("width"),f=this.$itemWrapper.data("height"),c=y/f||1,m=(this._currentImage.alignX===T?this.options:this._currentImage).alignX,v=(this._currentImage.alignY===T?this.options:this._currentImage).alignY,h=w(this._currentImage.scale||this.options.scale),b=("fit"===h||"fit-smaller"===h?(o=f,(n<(r=y)||s<o||"fit-smaller"===h)&&(o=c<(g=n/s)?(r=Math.floor(s*c),s):g<c?(r=n,Math.floor(n/c)):(r=n,s))):o="fill"===h?(r=n,s):(r=Math.max(s*c,n),Math.max(r/c,s)),a.top=-(o-s)*v,a.left=-(r-n)*m,a.width=r,a.height=o,this.options.bypassCss||this.$wrap.css({width:n,height:s}).find(">.backstretch-item").not(".deleteable").each(function(){k(this).find("img,video,iframe").css(a)}),k.Event("backstretch.resize",{relatedTarget:this.$container[0]}));this.$container.trigger(b,this)}catch(t){}return this},show:function(f,m){var v,b,_,w,t,$;if(!(Math.abs(f)>this.images.length-1))return b=(v=this).$wrap.find(">.backstretch-item").addClass("deleteable"),_=v.videoWrapper,w={relatedTarget:v.$container[0]},v.$container.trigger(k.Event("backstretch.before",w),[v,f]),this.index=f,t=v.images[f],clearTimeout(v._cycleTimeout),delete v.videoWrapper,($=p(t))?(v.videoWrapper=new c(t),v.$item=v.videoWrapper.$video.css("pointer-events","none")):v.$item=k("<img />"),v.$itemWrapper=k('<div class="backstretch-item">').append(v.$item),this.options.bypassCss?v.$itemWrapper.css({display:"none"}):(v.$itemWrapper.css(a.itemWrapper),v.$item.css(a.item)),v.$item.bind($?"canplay":"load",function(l){function t(t){return(i[t]!==T?i:v.options)[t]}function d(){_&&(_.stop(),_.destroy()),b.remove(),!v.paused&&1<v.images.length&&v.cycle(),v.options.bypassCss||v.isBody||v.$container.css("background-image","none"),k(["after","show"]).each(function(){v.$container.trigger(k.Event("backstretch."+this,w),[v,f])}),$&&v.videoWrapper.play()}var e=k(this).parent(),i=e.data("options"),p=(m&&(i=k.extend({},i,m)),this.naturalWidth||this.videoWidth||this.width),u=this.naturalHeight||this.videoHeight||this.height,p=(e.data("width",p).data("height",u),t("transition")),u=t("transitionEasing"),g=t("transitionDuration");if(v.firstShow&&!v.options.animateFirst||!g||!p)e.show(),d();else{var o={new:e,old:b,transition:p,duration:g,easing:u,complete:d},r=o.transition||"fade",a=((r="string"==typeof r&&-1<r.indexOf("|")?r.split("|"):r)instanceof Array&&(r=r[Math.round(Math.random()*(r.length-1))]),o.new),n=o.old||k([]);switch(r.toString().toLowerCase()){default:case"fade":a.fadeIn({duration:o.duration,complete:o.complete,easing:o.easing||T});break;case"fadeinout":case"fade_in_out":var s=function(){a.fadeIn({duration:o.duration/2,complete:o.complete,easing:o.easing||T})};n.length?n.fadeOut({duration:o.duration/2,complete:s,easing:o.easing||T}):s();break;case"pushleft":case"push_left":case"pushright":case"push_right":case"pushup":case"push_up":case"pushdown":case"push_down":case"coverleft":case"cover_left":case"coverright":case"cover_right":case"coverup":case"cover_up":case"coverdown":case"cover_down":var s=r.match(/^(cover|push)_?(.*)$/),c="left"===s[2]?"right":"right"===s[2]?"left":"down"===s[2]?"top":"up"===s[2]?"bottom":"right",h={display:""},y={};h[c]="-100%",y[c]=0,a.css(h).animate(y,{duration:o.duration,complete:function(){a.css(c,""),o.complete.apply(this,arguments)},easing:o.easing||T}),"push"===s[1]&&n.length&&((h={})[c]="100%",n.animate(h,{duration:o.duration,complete:function(){n.css("display","none")},easing:o.easing||T}))}}v.firstShow=!1,v.resize()}),v.$itemWrapper.appendTo(v.$wrap),v.$item.attr("alt",t.alt||""),v.$itemWrapper.data("options",t),$||v.$item.attr("src",t.url),v._currentImage=t,v},current:function(){return this.index},next:function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift(this.index<this.images.length-1?this.index+1:0),this.show.apply(this,t)},prev:function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift(0===this.index?this.images.length-1:this.index-1),this.show.apply(this,t)},pause:function(){return this.paused=!0,this.videoWrapper&&this.videoWrapper.pause(),this},resume:function(){return this.paused=!1,this.videoWrapper&&this.videoWrapper.play(),this.cycle(),this},cycle:function(){var t,e,i,o;return 1<this.images.length&&(clearTimeout(this._cycleTimeout),t=this._currentImage&&this._currentImage.duration||this.options.duration,i=function(){this.$item.off(".cycle"),this.paused||this.next()},(e=p(this._currentImage))&&(this._currentImage.loop||(o=0,this.$item.on("playing.cycle",function(){var t=k(this).data("player");clearTimeout(o),o=setTimeout(function(){t.pause(),t.$video.trigger("ended")},1e3*(t.getDuration()-t.getCurrentTime()))}).on("ended.cycle",function(){clearTimeout(o)})),this.$item.on("error.cycle initerror.cycle",k.proxy(i,this))),e&&!this._currentImage.duration?this.$item.on("ended.cycle",k.proxy(i,this)):this._cycleTimeout=setTimeout(k.proxy(i,this),t)),this},destroy:function(t){k(_).off("resize.backstretch orientationchange.backstretch"),this.videoWrapper&&this.videoWrapper.destroy(),clearTimeout(this._cycleTimeout),t||this.$wrap.remove(),this.$container.removeData("backstretch")}};var t,e,i,o,m,v,r,c=function(){this.init.apply(this,arguments)},b=(c.prototype.init=function(t){function e(){i.$video=r,i.video=r[0]}var i=this,o="video";if(t.url instanceof Array||!h.test(t.url)||(o="youtube"),"youtube"===(i.type=o)){c.loadYoutubeAPI(),i.ytId=t.url.match(h)[2];o="https://www.youtube.com/embed/"+i.ytId+"?rel=0&autoplay=0&showinfo=0&controls=0&modestbranding=1&cc_load_policy=0&disablekb=1&iv_load_policy=3&loop=0&enablejsapi=1&origin="+encodeURIComponent(_.location.origin);i.__ytStartMuted=!!t.mute||t.mute===T,r=k("<iframe />").attr({src_to_load:o}).css({border:0,margin:0,padding:0}).data("player",i),t.loop&&r.on("ended.loop",function(){i.__manuallyStopped||i.play()}),i.ytReady=!1,e(),_.YT&&_.YT.loaded?(i._initYoutube(),r.trigger("initsuccess")):k(_).one("youtube_api_load",function(){i._initYoutube(),r.trigger("initsuccess")})}else{for(var r=k("<video>").prop("autoplay",!1).prop("controls",!1).prop("loop",!!t.loop).prop("muted",!!t.mute||t.mute===T).prop("preload","auto").prop("poster",t.poster||""),a=t.url instanceof Array?t.url:[t.url],n=0;n<a.length;n++){var s=a[n];"string"==typeof s&&(s={src:s}),k("<source>").attr("src",s.src).attr("type",s.type||null).appendTo(r)}r[0].canPlayType&&a.length?r.trigger("initsuccess"):r.trigger("initerror"),e()}},c.prototype._initYoutube=function(){var t,e=this,i=_.YT,o=(e.$video.attr("src",e.$video.attr("src_to_load")).removeAttr("src_to_load"),!!e.$video[0].parentNode),r=(o||(t=k("<div>").css("display","none !important").appendTo(document.body),e.$video.appendTo(t)),new i.Player(e.video,{events:{onReady:function(){e.__ytStartMuted&&r.mute(),o||(e.$video[0].parentNode===t[0]&&e.$video.detach(),t.remove()),e.ytReady=!0,e._updateYoutubeSize(),e.$video.trigger("canplay")},onStateChange:function(t){switch(t.data){case i.PlayerState.PLAYING:e.$video.trigger("playing");break;case i.PlayerState.ENDED:e.$video.trigger("ended");break;case i.PlayerState.PAUSED:e.$video.trigger("pause");break;case i.PlayerState.BUFFERING:e.$video.trigger("waiting");break;case i.PlayerState.CUED:e.$video.trigger("canplay")}},onPlaybackQualityChange:function(){e._updateYoutubeSize(),e.$video.trigger("resize")},onError:function(t){e.hasError=!0,e.$video.trigger({type:"error",error:t})}}}));return e.ytPlayer=r,e},c.prototype._updateYoutubeSize=function(){var t=this;switch(t.ytPlayer.getPlaybackQuality()||"medium"){case"small":t.video.videoWidth=426,t.video.videoHeight=240;break;case"medium":t.video.videoWidth=640,t.video.videoHeight=360;break;default:case"large":t.video.videoWidth=854,t.video.videoHeight=480;break;case"hd720":t.video.videoWidth=1280,t.video.videoHeight=720;break;case"hd1080":t.video.videoWidth=1920,t.video.videoHeight=1080;break;case"highres":t.video.videoWidth=2560,t.video.videoHeight=1440}return t},c.prototype.play=function(){var t=this;return t.__manuallyStopped=!1,"youtube"===t.type?t.ytReady&&(t.$video.trigger("play"),t.ytPlayer.playVideo()):t.video.play(),t},c.prototype.pause=function(){var t=this;return t.__manuallyStopped=!1,"youtube"===t.type?t.ytReady&&t.ytPlayer.pauseVideo():t.video.pause(),t},c.prototype.stop=function(){var t=this;return t.__manuallyStopped=!0,"youtube"===t.type?t.ytReady&&(t.ytPlayer.pauseVideo(),t.ytPlayer.seekTo(0)):(t.video.pause(),t.video.currentTime=0),t},c.prototype.destroy=function(){return this.ytPlayer&&this.ytPlayer.destroy(),this.$video.remove(),this},c.prototype.getCurrentTime=function(t){return"youtube"!==this.type?this.video.currentTime:this.ytReady?this.ytPlayer.getCurrentTime():0},c.prototype.setCurrentTime=function(t){var e=this;return"youtube"===e.type?e.ytReady&&e.ytPlayer.seekTo(t,!0):e.video.currentTime=t,e},c.prototype.getDuration=function(){return"youtube"!==this.type?this.video.duration:this.ytReady?this.ytPlayer.getDuration():0},c.loadYoutubeAPI=function(){_.YT&&_.__yt_load_event_interval__||(_.YT||k("script[src*=www\\.youtube\\.com\\/iframe_api]").length||k('<script type="text/javascript" src="https://www.youtube.com/iframe_api">').appendTo("body"),_.__yt_load_event_interval__=setInterval(function(){_.YT&&_.YT.loaded&&(k(_).trigger("youtube_api_load"),clearTimeout(_.__yt_load_event_interval__),delete _.__yt_load_event_interval__)},50))},function(){if("matchMedia"in _){if(_.matchMedia("(orientation: portrait)").matches)return"portrait";if(_.matchMedia("(orientation: landscape)").matches)return"landscape"}return screen.height>screen.width?"portrait":"landscape"}),W=function(){return _.innerHeight>_.innerWidth?"portrait":_.innerWidth>_.innerHeight?"landscape":"square"},I=(t=navigator.userAgent,e=navigator.platform,i=!!(i=t.match(/AppleWebKit\/([0-9]+)/))&&i[1],o=!!(o=t.match(/Fennec\/([0-9]+)/))&&o[1],m=t.match(/Opera Mobi\/([0-9]+)/),v=!!m&&m[1],r=!!(r=t.match(/MSIE ([0-9]+)/))&&r[1],!((-1<e.indexOf("iPhone")||-1<e.indexOf("iPad")||-1<e.indexOf("iPod"))&&i&&i<534||_.operamini&&"[object OperaMini]"==={}.toString.call(_.operamini)||m&&v<7458||-1<t.indexOf("Android")&&i&&i<533||o&&o<6||"palmGetResource"in _&&i&&i<534||-1<t.indexOf("MeeGo")&&-1<t.indexOf("NokiaBrowser/8.5.0")||r&&r<=6))}(jQuery,window),function(i){"use strict";postBackstretch={init:function(){this.postBackstretchImg()},postBackstretchImg:function(){let t=i(".post-template-large .wp-picture img, .post-template-large2 .wp-picture img, .content-article .post-gallery-slider img, .post-template-large img, .post-template-large2 img").first(),e=i(".single-post-large");0<t.length&&t.attr("src")&&(t.attr("data-src")?e.backstretch(t.attr("data-src")):e.backstretch(t.attr("src"))),e.length&&i(window).scroll(function(){var t=i(window).scrollTop();i(".single-post-large img").css("transform","translate3d(0px, "+t/1.2+"px, 0px)")})}},i(document).ready(function(){postBackstretch.init()})}(jQuery);