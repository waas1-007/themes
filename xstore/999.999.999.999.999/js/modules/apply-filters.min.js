var ApplyFilters;!function(r){"use strict";var l,d;ApplyFilters={init:function(){l={},d={},this.loadedParams(),this.CollectParams(),this.ajaxRequest(),setTimeout(function(){r(".price_slider").parents("form").addClass("et-reinited")},100)},SetupClass:function(e){let t=e.parents("li");e.parents("ul").hasClass("st-swatch-preview")?t.addClass("selected chosen"):e.parents(".sidebar-widget").hasClass("etheme_widget_brands")?t.addClass("current-item"):t.addClass("chosen")},loadedParams:function(){r.each(ApplyFilters.GetUrlParams(location.href),function(e,t){t&&"undefined"!=t&&(l[e]?l[e].includes(t)||(l[e]+=","+t,d[e]+=","+t):(l[e]=t,d[e]=t))})},GetUrlParams:function(e){let t={},i=document.createElement("a"),a=(i.href=e,i.search.substring(1));if(!a)return!1;let n=a.split("&");for(let e=0;e<n.length;e++){var s=n[e].split("=");t[s[0]]=decodeURIComponent(s[1])}return t},ReinitPriceSlider:function(){if(r(".price_slider").length){if("undefined"==typeof woocommerce_price_slider_params)return!1;r("input#min_price, input#max_price").hide(),r(".price_slider, .price_label").show();let e=r(".price_slider_amount #min_price"),t=r(".price_slider_amount #max_price"),i=e.data("min"),a=t.data("max"),n=parseInt(e.val()?e.val():i,10),s=parseInt(t.val()?t.val():a,10);d.min_price&&(n=d.min_price),d.max_price&&(s=d.max_price),r(".price_slider").slider({range:!0,animate:!0,min:i,max:a,values:[n,s],create:function(){e.val(n),t.val(s),r(document.body).trigger("price_slider_create",[n,s])},slide:function(e,t){r("input#min_price").val(t.values[0]),r("input#max_price").val(t.values[1]),r(document.body).trigger("price_slider_slide",[t.values[0],t.values[1]])},change:function(e,t){r(document.body).trigger("price_slider_change",[t.values[0],t.values[1]])}})}setTimeout(function(){r(".price_slider").parents("form").addClass("et-reinited")},100)},ajaxRequest:function(){if(Object.keys(d).length){r(this).attr("href");let e=window.location.href;var s=e.split("?")[0];e=e.split("?")[0]+"?et_ajax=true",r.ajax({url:e,method:"GET",timeout:1e5,dataType:"text",beforeSend:function(){r(".sidebar.et-mini-content.active").removeClass("active"),r(".et-toggle-mob-sidebars-wrapper").removeClass("et-content-shown")},success:function(e){var t=r(e).find(".sidebar").html(),i=r(document).find(".etheme-active-filters").next("div").attr("id"),a=r(document).find(".etheme-active-filters").prev("div").attr("id"),n=r(document).find(".etheme-active-filters").clone();r(".content-page .sidebar").html(t),r(document).find(".etheme-active-filters")||(i?r(document).find("#"+i).before(n):a&&r(document).find("#"+a).before(n)),r.each(d,function(i,e){var t=e.split(",");1<t.length?r.each(t,function(e,t){ApplyFilters.SetupClass(r(document).find('a[href="'+s+"?"+i+"="+t+'"]'))}):ApplyFilters.SetupClass(r(document).find('a[href="'+s+"?"+i+"="+e+'"]'))}),jQuery().selectWoo&&r.each(r("select.woocommerce-widget-layered-nav-dropdown"),function(){var e=r(this);jQuery(e).selectWoo({minimumResultsForSearch:5,width:"100%",language:{noResults:function(){}}})}),"undefined"==typeof woocommerce_price_slider_params&&(t=r(e).find(".et_woocommerce_price_slider_params").html(),r("body").prepend(t)),etTheme.AjaxElement(),r(document).trigger("et_ajax_content_loaded")},error:function(e){etTheme.et_notice("ajax-filters","error")},complete:function(){r(".et-loader.product-ajax").removeClass("loading"),void 0!==etTheme.reinitSwatches&&etTheme.reinitSwatches(),void 0!==etTheme.contentProdImages&&etTheme.contentProdImages(),void 0!==etTheme.countdown&&etTheme.countdown(),r("body").removeClass("swc-default-done"),void 0!==etTheme.widgetsOpenCloseDefault&&etTheme.widgetsOpenCloseDefault(),ApplyFilters.ReinitPriceSlider(),etTheme.resizeVideo(),etTheme.swiperFunc(),etTheme.secondInitSwipers(),etTheme.customCss(),etTheme.customCssOne(),void 0!==etTheme.sidebarCanvas&&etTheme.sidebarCanvas(),void 0!==etTheme.stickySidebar&&etTheme.stickySidebar(),r(document).trigger("yith_wcwl_reload_fragments"),r("body").removeClass("ajax-progress"),etTheme.global_image_lazy(),void 0!==etTheme.widgetsShowMore&&etTheme.widgetsShowMore()}})}},CollectParams:function(){r(document).on("click",".content-page .etheme-ajax-filter, .content-page .etheme_swatches_filter ul li a, .content-page .woocommerce-widget-layered-nav ul li a, .content-page .widget_rating_filter ul li a, .content-page .widget_layered_nav_filters ul li a, .content-page .etheme_widget_brands_filter ul li a",function(e){var t=r(this),n=t.parents("li"),s=!1;if(t.parents("div").hasClass("etheme-active-filters"))"undefined"!=typeof ajaxFilters?(e.preventDefault(),d=l={},ajaxFilters.load_data(t.attr("href"),function(){})):location.href=url;else{e.preventDefault(),t.parents("ul").hasClass("st-swatch-preview")?n.hasClass("selected")?(n.removeClass("selected"),s=!0):n.addClass("selected"):t.parents(".sidebar-widget").hasClass("etheme_widget_brands")?n.hasClass("current-item")?(s=!0,n.removeClass("current-item")):n.addClass("current-item"):n.hasClass("chosen")?(s=!0,n.removeClass("chosen")):n.addClass("chosen");let i=r(this).attr("href"),a=window.location.href;if(!r(this).hasClass("remove-brand")&&!r(this).parents(".widget_layered_nav_filters").hasClass("etheme-active-filters")&&1<a.indexOf("filter_brand")){let e=new URL(a),t=e.searchParams.get("filter_brand");i=i.replace("?","?filter_brand="+t+"&")}e=ApplyFilters.GetUrlParams(i);r.each(e,function(i,e){var t;i&&(s?(l[i]&&(!e||"undefined"==e||""==e)||e==l[i]?delete l[i]:l[i].includes(e)&&(l[i]=l[i].replace(e,"").replace(",,",","),","==l[i].charAt(0)&&(l[i]=l[i].substring(1)),","==l[i].slice(-1)&&(l[i]=l[i].slice(0,-1))),""==l[i]&&delete l[i]):l[i]?l[i].includes(e)||(e.includes(",")?(t=e.split(","),r.each(t,function(e,t){l[i].includes(t)||(l[i]+=","+t)})):l[i]+=","+e):l[i]=e)}),Object.keys(l).length?r(document).find(".etheme_apply_all_filters").removeClass("hidden"):r(document).find(".etheme_apply_all_filters").addClass("hidden")}}),r(document).on("price_slider_change",function(){r(".et-reset-price").removeClass("hidden");let e=r(this).find(".etheme-price-filter form").first();var t;!e||e.length<1||!e.hasClass("et-reinited")||(t=e.attr("action")+"?"+e.serialize(),t=ApplyFilters.GetUrlParams(t),r.each(t,function(e,t){"et_ajax"!=e&&"undefined"!=t&&(l[e]=t)}),Object.keys(l).length?r(document).find(".etheme_apply_all_filters").removeClass("hidden"):r(document).find(".etheme_apply_all_filters").addClass("hidden"))}),r(document).on("change",".content-page select.woocommerce-widget-layered-nav-dropdown",function(e){let t=r(this),i=t.attr("class"),a="";i=i.split(" "),r.each(i,function(e,t){t.includes("dropdown_layered_nav_")&&(a=t.replace("dropdown_layered_nav_",""))}),a="filter_"+a,l[a]=t.val(),Object.keys(l).length?r(document).find(".etheme_apply_all_filters").removeClass("hidden"):r(document).find(".etheme_apply_all_filters").addClass("hidden")}),r(document).on("click",".etheme-all-filter",function(e){e.preventDefault();let i=r(this).attr("href");i+="?",r.each(l,function(e,t){i+=e+"="+t+"&"}),"&"==i.slice(-1)&&(i=i.slice(0,-1)),"undefined"!=typeof ajaxFilters?(d=l,ajaxFilters.load_data(i,function(){ApplyFilters.ajaxRequest()})):location.href=i})}},r(document).ready(function(){ApplyFilters.init()})}(jQuery);