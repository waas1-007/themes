(function(a){"use strict";var b={noticeCreate:function(b,c,d){var e,f,g=0;return!!(c&&"true"!==(d||!1))&&void(e=a("<div class=\"lastudio-handler-notice "+b+"\"><span class=\"dashicons\"></span><div class=\"inner\">"+c+"</div></div>"),a("body").prepend(e),function(){var b=100;a(".lastudio-handler-notice").each(function(){a(this).css({top:b}),b+=a(this).outerHeight(!0)})}(),g=-1*(e.outerWidth(!0)+10),e.css({right:g}),f=setTimeout(function(){e.css({right:10}).addClass("show-state")},100),f=setTimeout(function(){g=-1*(e.outerWidth(!0)+10),e.css({right:g}).removeClass("show-state")},4e3),f=setTimeout(function(){e.remove(),clearTimeout(f)},4500))},serializeObject:function(b){var c=this,d={},e={},f={validate:/^[a-zA-Z][a-zA-Z0-9_-]*(?:\[(?:\d*|[a-zA-Z0-9_-]+)\])*$/,key:/[a-zA-Z0-9_-]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_-]+$/};return this.build=function(a,b,c){return a[b]=c,a},this.push_counter=function(a){return void 0===e[a]&&(e[a]=0),e[a]++},a.each(b.serializeArray(),function(){var b,e,g,h;if(f.validate.test(this.name)){for(e=this.name.match(f.key),g=this.value,h=this.name;void 0!==(b=e.pop());)h=h.replace(new RegExp("\\["+b+"\\]$"),""),b.match(f.push)?g=c.build([],c.push_counter(h),g):b.match(f.fixed)?g=c.build([],b,g):b.match(f.named)&&(g=c.build({},b,g));d=a.extend(!0,d,g)}}),d}},c=function(c){var d=this,e={handlerId:"",cache:!1,processData:!0,url:"",async:!1,beforeSendCallback:function(){},errorCallback:function(){},successCallback:function(){},completeCallback:function(){}};c&&a.extend(e,c),d.handlerSettings=la_theme_config.subscribeForm||{},d.ajaxRequest=null,d.ajaxProcessing=!1,d.data={action:d.handlerSettings.action,nonce:d.handlerSettings.nonce},""===e.url&&(e.url=la_theme_config.ajax_url),d.send=function(){d.ajaxProcessing&&b.noticeCreate("error-notice",d.handlerSettings.sys_messages.wait_processing,d.handlerSettings.is_public),d.ajaxProcessing=!0,d.ajaxRequest=jQuery.ajax({type:d.handlerSettings.type,url:e.url,data:d.data,cache:e.cache,dataType:d.handlerSettings.data_type,processData:e.processData,beforeSend:function(a,b){null===d.ajaxRequest||e.async||d.ajaxRequest.abort(),e.beforeSendCallback&&"function"==typeof e.beforeSendCallback&&e.beforeSendCallback(a,b)},error:function(b,c,d){a(document).trigger({type:"lastudio-ajax-handler-error",jqXHR:b,textStatus:c,errorThrown:d}),e.errorCallback&&"function"==typeof e.errorCallback&&e.errorCallback(b,c,d)},success:function(c,f,g){d.ajaxProcessing=!1,a(document).trigger({type:"lastudio-ajax-handler-success",response:c,jqXHR:g,textStatus:f}),e.successCallback&&"function"==typeof e.successCallback&&e.successCallback(c,f,g),b.noticeCreate(c.type,c.message,d.handlerSettings.is_public)},complete:function(b,c){a(document).trigger({type:"lastudio-ajax-handler-complete",jqXHR:b,textStatus:c}),e.completeCallback&&"function"==typeof e.completeCallback&&e.completeCallback(b,c)}})},d.sendData=function(a){d.data={action:d.handlerSettings.action,nonce:d.handlerSettings.nonce,data:a||{}},d.send()},d.sendFormData=function(c){var e,f=a(c);e=b.serializeObject(f),d.sendData(e)}},d=function(b){function d(a){return /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a)}function e(){var b=k.val(),c={email:b,use_target_list_id:h.use_target_list_id||!1,target_list_id:h.target_list_id||"",data:l},e=i.serializeArray(),g={};d(b)?(a.each(e,function(a,b){"email"===b.name?c[b.name]=b.value:g[b.name]=b.value}),c.additional=g,q.sendData(c),m.addClass("loading")):(k.addClass("mail-invalid"),f.addClass("lastudio-subscribe-form--response-error"),a("span",n).html(p),n.css({visibility:"visible"}),o=setTimeout(function(){f.removeClass("lastudio-subscribe-form--response-error"),n.css({visibility:"hidden"}),k.removeClass("mail-invalid")},2e4))}var f=b.find(".lastudio-subscribe-form"),g=b.data("id"),h=f.data("settings"),i=a(".lastudio-subscribe-form__form",f),j=a(".lastudio-subscribe-form__fields",f),k=a(".lastudio-subscribe-form__mail-field",f),l=k.data("instance-data"),m=a(".lastudio-subscribe-form__submit",f),n=a(".lastudio-subscribe-form__message",f),o=null,p=la_theme_config.sys_messages.invalid_mail,q=new c({handlerId:"lastudio_elementor_subscribe_form_ajax",successCallback:function(b){var c=b.type,d=b.message||"",e="lastudio-subscribe-form--response-"+c;m.removeClass("loading"),f.removeClass("lastudio-subscribe-form--response-error"),f.addClass(e),a("span",n).html(d),n.css({visibility:"visible"}),o=setTimeout(function(){n.css({visibility:"hidden"}),f.removeClass(e)},2e4),h.redirect&&(window.location.href=h.redirect_url),a(window).trigger({type:"LaStudioElement/subscribe",elementId:g,successType:c,inputData:l})}});k.on("focus",function(){k.removeClass("mail-invalid")}),a(document).keydown(function(a){if(13===a.keyCode&&k.is(":focus"))return e(),!1}),m.on("click",function(){return e(),!1})};a(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/lastudio-subscribe-form.default",function(a){d(a)})}),a(function(){a(".custom-sf-shortcode").each(function(){d(a(this))})})})(jQuery);