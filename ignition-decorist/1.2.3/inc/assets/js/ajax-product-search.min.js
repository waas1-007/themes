jQuery(function(e){"use strict";function r(){c.hide()}function t(r,t){return e.ajax({url:ignition_decorist_vars.ajaxurl,method:"get",data:{action:"ignition_decorist_search_products",product_cat:r,s:t}})}function i(e,i){return i.trim().length<3?void r():(l.addClass("visible"),t(e,i).done(function(e){if(l.removeClass("visible"),e.error){var r=h.clone(),t=e.errors.join(", ");return r.find(".category-search-results-item-thumb").remove(),r.find(".category-search-results-item-excerpt").remove(),r.find(".category-search-results-item-price").remove(),r.addClass("error").find(".category-search-results-item-title").text(t),void c.html(r).show()}var i=e.data;if(0===i.length){var a=h.clone();return a.find(".category-search-results-item-thumb").remove(),a.find(".category-search-results-item-excerpt").remove(),a.find(".category-search-results-item-price").remove(),a.find(".category-search-results-item-title").text(ignition_decorist_vars.search_no_products),void c.html(a).show()}var o=i.map(function(e){var r=h.clone();return r.find("a").attr("href",e.url),e.image?r.find(".category-search-results-item-thumb").html(e.image):r.find(".category-search-results-item-thumb").remove(),r.find(".category-search-results-item-title").text(e.title),r.find(".category-search-results-item-excerpt").text(e.excerpt),r.find(".category-search-results-item-price").html(e.price),r});c.html(o),c.show()}))}var a=(e(window),e("body")),o=e(".category-search-form"),s=e(".category-search-select"),n=e(".category-search-input"),c=e(".category-search-results"),h=e(".category-search-results-item"),l=e(".category-search-spinner"),u=function(e,r,t){var i;return function(){var a=this,o=arguments,s=function(){i=null,t||e.apply(a,o)},n=t&&!i;clearTimeout(i),i=setTimeout(s,r),n&&e.apply(a,o)}}(i,500);o.hasClass("form-ajax-enabled")&&(n.on("change keyup focus",function(t){if("ArrowDown"!==t.key&&"ArrowUp"!==t.key){var i=e(this);if(i.val().trim().length<3)return void r();u(s.val(),i.val())}}),n.on("keydown",function(e){if("ArrowDown"===e.key||"ArrowUp"===e.key){var r=c.children(),t=c.find(".highlighted"),i=t.index();if(0!==r.length&&r){if("ArrowDown"===e.key){var a=r.eq(i+1);a.length&&(r.removeClass("highlighted"),a.addClass("highlighted"))}if("ArrowUp"===e.key){var o=r.eq(i-1);o.length&&(r.removeClass("highlighted"),o.addClass("highlighted"))}}}}),o.on("submit",function(e){var r=c.find(".highlighted");r.length>0&&(e.preventDefault(),window.location=r.find("a").attr("href"))})),a.on("click",function(){r()}).find(".category-search-input, .category-search-select").on("click",function(e){e.stopPropagation()})});